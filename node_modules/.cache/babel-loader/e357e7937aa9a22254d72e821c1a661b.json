{"remainingRequest":"/Users/mona/Desktop/main-prj-09-filtering-coaches/node_modules/babel-loader/lib/index.js!/Users/mona/Desktop/main-prj-09-filtering-coaches/node_modules/eslint-loader/index.js??ref--13-0!/Users/mona/Desktop/main-prj-09-filtering-coaches/src/store/modules/requests/actions.js","dependencies":[{"path":"/Users/mona/Desktop/main-prj-09-filtering-coaches/src/store/modules/requests/actions.js","mtime":1606394311000},{"path":"/Users/mona/Desktop/main-prj-09-filtering-coaches/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mona/Desktop/main-prj-09-filtering-coaches/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mona/Desktop/main-prj-09-filtering-coaches/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbW9uYS9EZXNrdG9wL21haW4tcHJqLTA5LWZpbHRlcmluZy1jb2FjaGVzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbnRhY3RDb2FjaDogZnVuY3Rpb24gY29udGFjdENvYWNoKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBuZXdSZXF1ZXN0LCByZXNwb25zZSwgcmVzcG9uc2VEYXRhLCBlcnJvcjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG5ld1JlcXVlc3QgPSB7CiAgICAgICAgICAgICAgICB1c2VyRW1haWw6IHBheWxvYWQuZW1haWwsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiBwYXlsb2FkLm1lc3NhZ2UKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiaHR0cHM6Ly9maWx0ZXJpbmctY29hY2guZmlyZWJhc2Vpby5jb20vcmVxdWVzdHMvIi5jb25jYXQocGF5bG9hZC5jb2FjaElkLCAiLmpzb24iKSwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShuZXdSZXF1ZXN0KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZURhdGEubWVzc2FnZSB8fCAnc29tdGhpbmcgZmFpbCcpOwogICAgICAgICAgICAgIHRocm93IGVycm9yOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBuZXdSZXF1ZXN0LmlkID0gcmVzcG9uc2VEYXRhLm5hbWU7CiAgICAgICAgICAgICAgbmV3UmVxdWVzdC5jb2FjaElkID0gcGF5bG9hZC5jb2FjaElkOwogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRSZXF1ZXN0JywgbmV3UmVxdWVzdCk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZmV0Y2hSZXF1ZXN0OiBmdW5jdGlvbiBmZXRjaFJlcXVlc3QoY29udGV4dCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb2FjaElkLCByZXNwb25zZSwgcmVzcG9uc2VEYXRhLCBlcnJvciwgcmVxdWVzdHMsIGtleSwgcmVxdWVzdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb2FjaElkID0gY29udGV4dC5yb290R2V0dGVycy51c2VySWQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiaHR0cHM6Ly9maWx0ZXJpbmctY29hY2guZmlyZWJhc2Vpby5jb20vcmVxdWVzdHMvIi5jb25jYXQoY29hY2hJZCwgIi5qc29uIikpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgZXJyb3IocmVzcG9uc2VEYXRhLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBmZXRjaCBSZXF1ZXN0Jyk7CiAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHJlcXVlc3RzID0gW107CgogICAgICAgICAgICAgIGZvciAoa2V5IGluIHJlc3BvbnNlRGF0YSkgewogICAgICAgICAgICAgICAgcmVxdWVzdCA9IHsKICAgICAgICAgICAgICAgICAgaWQ6IGtleSwKICAgICAgICAgICAgICAgICAgY29hY2hJZDogY29hY2hJZCwKICAgICAgICAgICAgICAgICAgdXNlckVtYWlsOiByZXNwb25zZURhdGFba2V5XS51c2VyRW1haWwsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YVtrZXldLm1lc3NhZ2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXF1ZXN0cy5wdXNoKHJlcXVlc3QpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFJlcXVlc3RzJywgcmVxdWVzdHMpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/Users/mona/Desktop/main-prj-09-filtering-coaches/src/store/modules/requests/actions.js"],"names":["contactCoach","context","payload","newRequest","userEmail","email","message","fetch","coachId","method","body","JSON","stringify","response","json","responseData","ok","error","Error","id","name","commit","fetchRequest","rootGetters","userId","requests","key","request","push"],"mappings":";;;;AAAA,eAAe;AACPA,EAAAA,YADO,wBACMC,OADN,EACeC,OADf,EACwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAC7BC,cAAAA,UAD6B,GAChB;AACjBC,gBAAAA,SAAS,EAAEF,OAAO,CAACG,KADF;AAEjBC,gBAAAA,OAAO,EAAEJ,OAAO,CAACI;AAFA,eADgB;AAAA;AAAA,qBAKZC,KAAK,2DACyBL,OAAO,CAACM,OADjC,YAE1B;AACEC,gBAAAA,MAAM,EAAE,MADV;AAEEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,UAAf;AAFR,eAF0B,CALO;;AAAA;AAK7BU,cAAAA,QAL6B;AAAA;AAAA,qBAaRA,QAAQ,CAACC,IAAT,EAbQ;;AAAA;AAa7BC,cAAAA,YAb6B;;AAAA,kBAc9BF,QAAQ,CAACG,EAdqB;AAAA;AAAA;AAAA;;AAe3BC,cAAAA,KAf2B,GAenB,IAAIC,KAAJ,CAAUH,YAAY,CAACT,OAAb,IAAwB,eAAlC,CAfmB;AAAA,oBAgB3BW,KAhB2B;;AAAA;AAkBnCd,cAAAA,UAAU,CAACgB,EAAX,GAAgBJ,YAAY,CAACK,IAA7B;AACAjB,cAAAA,UAAU,CAACK,OAAX,GAAqBN,OAAO,CAACM,OAA7B;AAEAP,cAAAA,OAAO,CAACoB,MAAR,CAAe,YAAf,EAA6BlB,UAA7B;;AArBmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBpC,GAvBY;AAyBPmB,EAAAA,YAzBO,wBAyBMrB,OAzBN,EAyBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBO,cAAAA,OADoB,GACVP,OAAO,CAACsB,WAAR,CAAoBC,MADV;AAAA;AAAA,qBAEHjB,KAAK,2DACyBC,OADzB,WAFF;;AAAA;AAEpBK,cAAAA,QAFoB;AAAA;AAAA,qBAKCA,QAAQ,CAACC,IAAT,EALD;;AAAA;AAKpBC,cAAAA,YALoB;;AAAA,kBAMrBF,QAAQ,CAACG,EANY;AAAA;AAAA;AAAA;;AAOlBC,cAAAA,KAPkB,GAOV,IAAIA,KAAJ,CACZF,YAAY,CAACT,OAAb,IAAwB,yBADZ,CAPU;AAAA,oBAUlBW,KAVkB;;AAAA;AAYpBQ,cAAAA,QAZoB,GAYT,EAZS;;AAa1B,mBAAWC,GAAX,IAAkBX,YAAlB,EAAgC;AACxBY,gBAAAA,OADwB,GACd;AACdR,kBAAAA,EAAE,EAAEO,GADU;AAEdlB,kBAAAA,OAAO,EAAEA,OAFK;AAGdJ,kBAAAA,SAAS,EAAEW,YAAY,CAACW,GAAD,CAAZ,CAAkBtB,SAHf;AAIdE,kBAAAA,OAAO,EAAES,YAAY,CAACW,GAAD,CAAZ,CAAkBpB;AAJb,iBADc;AAO9BmB,gBAAAA,QAAQ,CAACG,IAAT,CAAcD,OAAd;AACD;;AACD1B,cAAAA,OAAO,CAACoB,MAAR,CAAe,aAAf,EAA8BI,QAA9B;;AAtB0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuB3B;AAhDY,CAAf","sourcesContent":["export default {\n  async contactCoach(context, payload) {\n    const newRequest = {\n      userEmail: payload.email,\n      message: payload.message\n    };\n    const response = await fetch(\n      `https://filtering-coach.firebaseio.com/requests/${payload.coachId}.json`,\n      {\n        method: 'POST',\n        body: JSON.stringify(newRequest)\n      }\n    );\n\n    const responseData = await response.json();\n    if (!response.ok) {\n      const error = new Error(responseData.message || 'somthing fail');\n      throw error;\n    }\n    newRequest.id = responseData.name;\n    newRequest.coachId = payload.coachId;\n\n    context.commit('addRequest', newRequest);\n  },\n\n  async fetchRequest(context) {\n    const coachId = context.rootGetters.userId;\n    const response = await fetch(\n      `https://filtering-coach.firebaseio.com/requests/${coachId}.json`\n    );\n    const responseData = await response.json();\n    if (!response.ok) {\n      const error = new error(\n        responseData.message || 'Failed to fetch Request'\n      );\n      throw error;\n    }\n    const requests = [];\n    for (const key in responseData) {\n      const request = {\n        id: key,\n        coachId: coachId,\n        userEmail: responseData[key].userEmail,\n        message: responseData[key].message\n      };\n      requests.push(request);\n    }\n    context.commit('setRequests', requests);\n  }\n};\n"]}]}